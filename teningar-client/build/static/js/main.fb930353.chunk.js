(this["webpackJsonpteningar-client"]=this["webpackJsonpteningar-client"]||[]).push([[0],{121:function(e,t,c){},122:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c(0),i=c.n(a),r=c(14),s=c.n(r),o=(c(82),c(83),c(6)),j=c(144),l=c(153),u=c(154),d=c(157),b=c(160),O=c(158),x=c(25),m=c.n(x),h=(c(48),Object(a.forwardRef)((function(e,t){var c,i,r,s;return Object(a.useEffect)((function(){e.diceNumbers&&t.current.rollAll(e.diceNumbers)}),[t,e.diceNumbers]),Object(n.jsx)(m.a,{dotColor:null!==(c=e.dotColor)&&void 0!==c?c:"#eeeeee",faceColor:null!==(i=e.faceColor)&&void 0!==i?i:"#111111",numDice:e.numberOfDice,rollTime:.5,ref:t,disableIndividual:!0,dieSize:null!==(r=e.dieSize)&&void 0!==r?r:60,value:e.diceNumbers,margin:null!==(s=e.margin)&&void 0!==s?s:15})}))),f=function(){var e=Object(a.useState)(6),t=Object(o.a)(e,2),c=t[0],i=t[1],r=Object(a.useState)("#EEEEEE"),s=Object(o.a)(r,2),l=s[0],u=s[1],x=Object(a.useState)("#111111"),m=Object(o.a)(x,2),f=m[0],g=m[1],p=Object(a.createRef)();return Object(n.jsxs)(j.a,{container:!0,spacing:2,justify:"center",alignItems:"center",style:{maxWidth:800,margin:"auto"},children:[Object(n.jsx)(j.a,{item:!0,xs:12,children:Object(n.jsx)(h,{dotColor:f,faceColor:l,numberOfDice:c,ref:p})}),Object(n.jsx)(j.a,{item:!0,xs:4,children:Object(n.jsx)(d.a,{color:"primary",variant:"contained",onClick:function(){p.current&&p.current.rollAll()},children:"Roll dice"})}),Object(n.jsx)(j.a,{item:!0,xs:4,children:Object(n.jsx)(d.a,{color:"primary",variant:"contained",onClick:function(){c>0&&i(c-1)},children:"Remove dice"})}),Object(n.jsx)(j.a,{item:!0,xs:4,children:Object(n.jsx)(d.a,{color:"primary",variant:"contained",onClick:function(){i(c+1)},children:"Add dice"})}),Object(n.jsxs)(j.a,{item:!0,xs:6,children:[Object(n.jsx)(b.a,{children:"Face color"}),Object(n.jsx)(O.a,{value:l,onChange:function(e){return u(e.target.value)}})]}),Object(n.jsxs)(j.a,{item:!0,xs:6,children:[Object(n.jsx)(b.a,{children:"Dot color"}),Object(n.jsx)(O.a,{label:"Dot color",value:f,onChange:function(e){return g(e.target.value)}})]})]})},g=c(74),p=c.n(g),y={ENDPOINT:window.location.hostname},v=c(147),S=c(123),k=c(148),C=c(149),N=c(150),D=c(151),T=c(152),G=function(e){var t={fontWeight:"bold",textAlign:"center"},c={textAlign:"center"};return Object(n.jsx)(v.a,{style:{margin:"auto",width:300},component:S.a,children:Object(n.jsxs)(k.a,{children:[Object(n.jsx)(C.a,{children:Object(n.jsxs)(N.a,{children:[Object(n.jsx)(D.a,{style:t,children:"Name"}),Object(n.jsx)(D.a,{style:t,children:"Score"})]})}),Object(n.jsx)(T.a,{children:e.players.map((function(e){return Object(n.jsxs)(N.a,{children:[Object(n.jsxs)(D.a,{style:c,children:[e.name," "]}),Object(n.jsx)(D.a,{style:c,children:e.score})]},e.name)}))})]})})},I=c(22),E=c(161),w=c(159),R=Object(a.createRef)(),A=function(e){var t=Object(a.useState)({numberOfDice:0,diceValue:1}),c=Object(o.a)(t,2),i=c[0],r=c[1];return Object(a.useEffect)((function(){R.current&&i.diceValue&&R.current.rollAll([i.diceValue])}),[i.diceValue]),Object(n.jsx)(j.a,{item:!0,xs:12,children:Object(n.jsxs)(l.a,{style:{margin:"auto",padding:15,maxWidth:400},children:[Object(n.jsx)(E.a,{title:"Guess the dice"}),Object(n.jsxs)(u.a,{children:[Object(n.jsxs)(j.a,{item:!0,xs:12,style:{paddingTop:15},children:[Object(n.jsx)(b.a,{children:"Number of Dice"}),Object(n.jsx)(O.a,{type:"number",value:i.numberOfDice,onChange:function(e){var t=parseInt(e.target.value);r(t?Object(I.a)(Object(I.a)({},i),{},{numberOfDice:parseInt(e.target.value)}):Object(I.a)(Object(I.a)({},i),{},{numberOfDice:""}))}})]}),Object(n.jsxs)(j.a,{item:!0,xs:12,style:{paddingTop:15,paddingBottom:15},children:[Object(n.jsx)(b.a,{children:"Dice value"}),Object(n.jsx)(w.a,{marks:!0,value:i.diceValue,onChange:function(e,t){r(Object(I.a)(Object(I.a)({},i),{},{diceValue:t})),R.current.rollAll([t])},min:1,max:6})]}),Object(n.jsxs)(j.a,{item:!0,xs:12,children:[i.numberOfDice," of",Object(n.jsx)(m.a,{dotColor:"#eeeeee",faceColor:"#111111",numDice:1,rollTime:.1,disableIndividual:!0,ref:R})]}),Object(n.jsx)(j.a,{item:!0,xs:12,children:Object(n.jsx)(d.a,{variant:"outlined",onClick:function(){return e.sendGuess(i)},children:"Send Guess"})}),e.illegalGuess&&Object(n.jsx)(j.a,{item:!0,xs:12,children:"Guess was illegal"})]})]})})},P=function(e){return Object(n.jsx)(j.a,{item:!0,xs:12,children:Object(n.jsx)(l.a,{style:{margin:"auto",maxWidth:400},children:Object(n.jsxs)(u.a,{children:[Object(n.jsxs)(j.a,{item:!0,xs:12,children:[e.playerGuessingDice," betting on dice"]}),Object(n.jsxs)(j.a,{item:!0,xs:12,children:[e.playerGuessingTruth," calling ",e.playerGuessingDice,"'s bet"]}),e.isGuessTurn?Object(n.jsxs)(j.a,{item:!0,xs:12,children:[e.playerGuessingDice," is about to make the bet"]}):Object(n.jsxs)(j.a,{item:!0,xs:12,children:[e.playerGuessingDice," has made the bet"]})]})})})},V=function(e){return Object(n.jsxs)(l.a,{style:{margin:"auto",marginBottom:20},children:[Object(n.jsx)(E.a,{title:"Is the guess truth or Bluff?"}),Object(n.jsxs)(u.a,{children:[Object(n.jsx)(j.a,{item:!0,xs:12,children:Object(n.jsx)(d.a,{variant:"outlined",color:"primary",onClick:function(){return e.sendTruth(!0)},children:"Truth"})}),Object(n.jsx)(j.a,{item:!0,xs:12,style:{marginTop:15},children:Object(n.jsx)(d.a,{variant:"outlined",color:"secondary",onClick:function(){return e.sendTruth(!1)},children:"Bluffing"})})]})]})},B=c(155),W=c(156),F=Object(B.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}})),L=function(e){var t=Object(a.useState)(!1),c=Object(o.a)(t,2),i=c[0],r=c[1],s=F(),j=Object(a.useState)(""),l=Object(o.a)(j,2),u=l[0],d=l[1],b=Object(a.useState)([]),O=Object(o.a)(b,2),x=O[0],m=O[1];Object(a.useEffect)((function(){e.data&&(r(!0),m(e.data.playersRoundInfo),d(e.data.infoMsg))}),[e.data]);return Object(n.jsx)(W.a,{open:i,onClose:function(){r(!1)},className:s.modal,children:Object(n.jsxs)("div",{className:s.paper,children:[Object(n.jsx)("h3",{children:"End of round info"}),Object(n.jsx)("p",{children:u}),Object(n.jsx)("h5",{children:"Player's dice"}),Object(n.jsx)(v.a,{children:Object(n.jsx)(k.a,{children:Object(n.jsx)(T.a,{children:null===x||void 0===x?void 0:x.map((function(e){return function(e){var t=Object(a.createRef)();return Object(n.jsxs)(N.a,{children:[Object(n.jsx)(D.a,{align:"center",children:e.name}),Object(n.jsx)(D.a,{align:"center",children:Object(n.jsx)(h,{diceNumbers:e.diceNumbers,numberOfDice:e.diceNumbers.length,dieSize:20,margin:3,ref:t})})]},e.name)}(e)}))})})})]})})},M=Object(a.createRef)(),J=Object(a.createRef)(),z=function(e){var t=Object(a.useState)([]),c=Object(o.a)(t,2),i=c[0],r=c[1],s=Object(a.useState)(!1),d=Object(o.a)(s,2),b=d[0],O=d[1],x=Object(a.useState)(!1),f=Object(o.a)(x,2),g=f[0],p=f[1],y=Object(a.useState)(!1),v=Object(o.a)(y,2),S=v[0],k=v[1],C=Object(a.useState)(""),N=Object(o.a)(C,2),D=N[0],T=N[1],I=Object(a.useState)(""),E=Object(o.a)(I,2),w=E[0],R=E[1],B=Object(a.useState)({diceValue:1,numberOfDice:0}),W=Object(o.a)(B,2),F=W[0],z=W[1],Y=Object(a.useState)(!0),U=Object(o.a)(Y,2),q=U[0],H=U[1],K=Object(a.useState)(void 0),Q=Object(o.a)(K,2),X=Q[0],Z=Q[1];Object(a.useEffect)((function(){e.socket&&(e.socket.on("diceRolled",(function(e){r(e),M.current&&M.current.rollAll(e)})),J.current&&J.current.rollAll([1]),e.socket.on("turnInfo",(function(e){R(e.playerGuessingDice),T(e.playerGuessingTruth),z(e.currentGuess),H(e.isGuessTurn),J.current.rollAll([e.currentGuess.diceValue])})),e.socket.on("getGuess",(function(){p(!0)})),e.socket.on("getTruth",(function(){k(!0)})),e.socket.on("endOfRoundInfo",(function(e){Z(e)})))}),[e.socket]);return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)(j.a,{container:!0,spacing:2,children:[Object(n.jsx)(j.a,{item:!0,xs:12,children:Object(n.jsx)(h,{ref:M,numberOfDice:i.length})}),Object(n.jsx)(j.a,{item:!0,xs:12,children:Object(n.jsx)(l.a,{style:{maxWidth:200,margin:"auto"},children:Object(n.jsxs)(u.a,{children:["Current guess is ",F.numberOfDice," of",function(){var t,c;return Object(n.jsx)(m.a,{dotColor:null!==(t=e.dotColor)&&void 0!==t?t:"#ee77ee",faceColor:null!==(c=e.faceColor)&&void 0!==c?c:"#6f1111",numDice:1,rollTime:.1,disableIndividual:!0,ref:J})}()]})})}),g&&Object(n.jsx)(A,{socket:e.socket,setDiceGuessTurn:p,illegalGuess:b,sendGuess:function(t){Number.isInteger(t.diceValue)&&Number.isInteger(t.numberOfDice)&&t.diceValue>0&&t.diceValue<=6&&(e.socket.emit("sendGuess",t),e.socket.once("legalGuess",(function(e){e?(p(!1),O(!1)):O(!0)})))}}),S&&Object(n.jsx)(V,{sendTruth:function(t){e.socket.emit("sendTruth",t),k(!1)}}),Object(n.jsx)(P,{playerGuessingDice:w,playerGuessingTruth:D,isGuessTurn:q}),Object(n.jsx)(j.a,{item:!0,xs:12,children:Object(n.jsx)("h5",{children:"Players in game"})}),Object(n.jsx)(j.a,{item:!0,xs:12,children:Object(n.jsx)(G,{players:e.players})})]}),Object(n.jsx)(L,{data:X})]})},Y=function(e){var t=Object(a.useState)([]),c=Object(o.a)(t,2),i=c[0],r=c[1],s=Object(a.useState)([]),l=Object(o.a)(s,2),u=l[0],b=l[1],O=Object(a.useState)(!1),x=Object(o.a)(O,2),m=x[0],h=x[1],f=Object(a.useState)(!1),g=Object(o.a)(f,2),p=g[0],y=g[1];Object(a.useEffect)((function(){e.socket.on("playerUpdate",(function(e){r(e.playerNamesAndScore),b(e.playerNamesAndScore),y(e.gameStarted)})),e.socket.on("allowStartGame",(function(e){h(!0)})),e.socket.on("gameStarted",(function(){y(!0)})),e.socket.on("gameOver",(function(e){y(!1),r(e),b(e)}))}),[e.socket]);var v=function(){e.socket.emit("startGame",{})};return p?Object(n.jsx)(z,{players:i,socket:e.socket}):Object(n.jsxs)(j.a,{container:!0,spacing:2,children:[Object(n.jsx)(j.a,{item:!0,xs:12,children:Object(n.jsxs)("h3",{children:["Waiting room for room '",e.roomName,"'"]})}),Object(n.jsx)(j.a,{item:!0,xs:12,children:Object(n.jsx)("p",{children:"Waiting for leader to press play."})}),Object(n.jsx)(j.a,{item:!0,xs:12,children:Object(n.jsx)("p",{children:"You want the least points. You get 0 points for winning. You get 1 point if a there was one person to finish before you and etc."})}),Object(n.jsx)(j.a,{item:!0,xs:12,children:Object(n.jsx)("h5",{children:"Players waiting"})}),Object(n.jsx)(j.a,{item:!0,xs:12,children:Object(n.jsx)(G,{players:u})}),m&&Object(n.jsx)(j.a,{item:!0,xs:12,children:Object(n.jsx)(d.a,{onClick:v,variant:"contained",children:"Start game"})})]})},U=y.ENDPOINT,q=function(){var e=Object(a.useState)(""),t=Object(o.a)(e,2),c=t[0],i=t[1],r=Object(a.useState)(""),s=Object(o.a)(r,2),b=s[0],x=s[1],m=Object(a.useState)(!1),h=Object(o.a)(m,2),f=h[0],g=h[1],y=Object(a.useState)(void 0),v=Object(o.a)(y,2),S=v[0],k=v[1],C=Object(a.useState)(!1),N=Object(o.a)(C,2),D=N[0],T=N[1],G=Object(a.useState)(""),I=Object(o.a)(G,2),E=I[0],w=I[1];Object(a.useEffect)((function(){var e=p()(U);k(e),e.on("connectedToRoomCallBack",(function(e){}))}),[]);var R=function(){S.emit("connectToRoom",{playerName:b,roomName:c}),S.once("errorJoining",(function(e){e.errorJoining?(T(!0),w(e.errorMsg)):(g(!0),T(!1),w(""))}))};return f?Object(n.jsx)(Y,{roomName:c,socket:S}):Object(n.jsxs)(j.a,{container:!0,spacing:2,children:[Object(n.jsx)(j.a,{item:!0,xs:12,children:Object(n.jsx)("h3",{children:"Online dice page"})}),Object(n.jsxs)(j.a,{item:!0,xs:12,children:[Object(n.jsx)("p",{children:'In room name write some name, e.g. "party", "p" or anything. Then make your friends write the same name to connect to your room.'}),Object(n.jsx)("p",{children:"If you lose connection you can just join again with the same name"})]}),Object(n.jsx)(l.a,{style:{margin:"auto"},children:Object(n.jsxs)(u.a,{children:[Object(n.jsx)(j.a,{item:!0,xs:12,children:Object(n.jsx)(O.a,{value:b,onChange:function(e){return x(e.target.value)},placeholder:"Name"})}),Object(n.jsx)(j.a,{item:!0,xs:12,style:{paddingTop:15,paddingBottom:15},children:Object(n.jsx)(O.a,{placeholder:"Room name",value:c,onChange:function(e){return i(e.target.value)}})}),Object(n.jsx)(j.a,{item:!0,xs:12,children:Object(n.jsx)(d.a,{color:"primary",variant:"contained",onClick:R,children:"Connect to room"})}),D&&Object(n.jsx)(j.a,{item:!0,xs:12,children:E})]})})]})},H=(c(121),function(){var e=Object(a.useState)("NONE"),t=Object(o.a)(e,2),c=t[0],i=t[1];return Object(n.jsxs)(j.a,{container:!0,spacing:2,justify:"center",alignItems:"center",className:"container",children:["SIMPLE"===c&&Object(n.jsx)(j.a,{item:!0,xs:12,children:Object(n.jsx)(f,{})}),"ONLINE"===c&&Object(n.jsx)(j.a,{item:!0,xs:12,children:Object(n.jsx)(q,{})}),"NONE"===c&&Object(n.jsx)(l.a,{style:{width:300,marginTop:30},children:Object(n.jsxs)(u.a,{children:[Object(n.jsx)(j.a,{item:!0,xs:6,style:{paddingBottom:20,margin:"auto"},children:Object(n.jsx)(d.a,{color:"primary",variant:"contained",onClick:function(){return i("SIMPLE")},children:"Play simple"})}),Object(n.jsx)(j.a,{item:!0,xs:6,style:{margin:"auto"},children:Object(n.jsx)(d.a,{color:"secondary",variant:"contained",onClick:function(){return i("ONLINE")},children:"Play online"})})]})})]})});var K=function(){return Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)("div",{className:"header",children:"Dice game"}),Object(n.jsx)(H,{})]})},Q=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,163)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,i=t.getLCP,r=t.getTTFB;c(e),n(e),a(e),i(e),r(e)}))};s.a.render(Object(n.jsx)(i.a.StrictMode,{children:Object(n.jsx)(K,{})}),document.getElementById("root")),Q()},82:function(e,t,c){},83:function(e,t,c){}},[[122,1,2]]]);
//# sourceMappingURL=main.fb930353.chunk.js.map