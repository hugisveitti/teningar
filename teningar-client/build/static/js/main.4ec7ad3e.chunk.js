(this["webpackJsonpteningar-client"]=this["webpackJsonpteningar-client"]||[]).push([[0],{117:function(e,t,c){},118:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c(0),i=c.n(a),r=c(23),s=c.n(r),j=(c(78),c(79),c(6)),l=c(137),o=c(145),u=c(146),b=c(147),O=c(38),d=c.n(O),x=c(150),m=c(148),h=c(24),f=c.n(h),g=(c(51),Object(a.forwardRef)((function(e,t){var c,a;return Object(n.jsx)(f.a,{dotColor:null!==(c=e.dotColor)&&void 0!==c?c:"#eeeeee",faceColor:null!==(a=e.faceColor)&&void 0!==a?a:"#111111",numDice:e.numberOfDice,rollTime:.5,ref:t,disableIndividual:!0})}))),p=function(){var e=Object(a.useState)(6),t=Object(j.a)(e,2),c=t[0],i=t[1],r=Object(a.useState)("#EEEEEE"),s=Object(j.a)(r,2),o=s[0],u=s[1],O=Object(a.useState)("#111111"),d=Object(j.a)(O,2),h=d[0],f=d[1],p=Object(a.createRef)();return Object(n.jsxs)(l.a,{container:!0,spacing:2,justify:"center",alignItems:"center",style:{maxWidth:800,margin:"auto"},children:[Object(n.jsx)(l.a,{item:!0,xs:12,children:Object(n.jsx)(g,{dotColor:h,faceColor:o,numberOfDice:c,ref:p})}),Object(n.jsx)(l.a,{item:!0,xs:4,children:Object(n.jsx)(b.a,{color:"primary",variant:"contained",onClick:function(){p.current&&p.current.rollAll()},children:"Roll dice"})}),Object(n.jsx)(l.a,{item:!0,xs:4,children:Object(n.jsx)(b.a,{color:"primary",variant:"contained",onClick:function(){c>0&&i(c-1)},children:"Remove dice"})}),Object(n.jsx)(l.a,{item:!0,xs:4,children:Object(n.jsx)(b.a,{color:"primary",variant:"contained",onClick:function(){i(c+1)},children:"Add dice"})}),Object(n.jsxs)(l.a,{item:!0,xs:6,children:[Object(n.jsx)(x.a,{children:"Face color"}),Object(n.jsx)(m.a,{value:o,onChange:function(e){return u(e.target.value)}})]}),Object(n.jsxs)(l.a,{item:!0,xs:6,children:[Object(n.jsx)(x.a,{children:"Dot color"}),Object(n.jsx)(m.a,{label:"Dot color",value:h,onChange:function(e){return f(e.target.value)}})]})]})},v="http://teningar.herokuapp.com/",y=c(139),k=c(119),C=c(140),S=c(141),D=c(142),G=c(143),T=c(144),N=function(e){var t={fontWeight:"bold",textAlign:"center"},c={textAlign:"center"};return Object(n.jsx)(y.a,{style:{margin:"auto",width:300},component:k.a,children:Object(n.jsxs)(C.a,{children:[Object(n.jsx)(S.a,{children:Object(n.jsxs)(D.a,{children:[Object(n.jsx)(G.a,{style:t,children:"Name"}),Object(n.jsx)(G.a,{style:t,children:"Score"})]})}),Object(n.jsx)(T.a,{children:e.players.map((function(e){return Object(n.jsxs)(D.a,{children:[Object(n.jsxs)(G.a,{style:c,children:[e.name," "]}),Object(n.jsx)(G.a,{style:c,children:e.score})]},e.name)}))})]})})},E=c(20),I=c(151),A=c(149),R=Object(a.createRef)(),V=function(e){var t=Object(a.useState)({numberOfDice:0,diceValue:1}),c=Object(j.a)(t,2),i=c[0],r=c[1];return Object(a.useEffect)((function(){R.current&&i.diceValue&&R.current.rollAll([i.diceValue])}),[]),Object(n.jsx)(l.a,{item:!0,xs:12,children:Object(n.jsxs)(o.a,{style:{margin:"auto",padding:15,maxWidth:400},children:[Object(n.jsx)(I.a,{title:"Guess the dice"}),Object(n.jsxs)(u.a,{children:[Object(n.jsxs)(l.a,{item:!0,xs:12,style:{paddingTop:15},children:[Object(n.jsx)(x.a,{children:"Number of Dice"}),Object(n.jsx)(m.a,{type:"number",value:i.numberOfDice,onChange:function(e){var t=parseInt(e.target.value);r(t?Object(E.a)(Object(E.a)({},i),{},{numberOfDice:parseInt(e.target.value)}):Object(E.a)(Object(E.a)({},i),{},{numberOfDice:""}))}})]}),Object(n.jsxs)(l.a,{item:!0,xs:12,style:{paddingTop:15,paddingBottom:15},children:[Object(n.jsx)(x.a,{children:"Dice value"}),Object(n.jsx)(A.a,{marks:!0,value:i.diceValue,onChange:function(e,t){r(Object(E.a)(Object(E.a)({},i),{},{diceValue:t})),R.current.rollAll([t])},min:1,max:6})]}),Object(n.jsxs)(l.a,{item:!0,xs:12,children:[i.numberOfDice," of",Object(n.jsx)(f.a,{dotColor:"#eeeeee",faceColor:"#111111",numDice:1,rollTime:.1,disableIndividual:!0,ref:R})]}),Object(n.jsx)(l.a,{item:!0,xs:12,children:Object(n.jsx)(b.a,{variant:"outlined",onClick:function(){return e.sendGuess(i)},children:"Send Guess"})}),e.illegalGuess&&Object(n.jsx)(l.a,{item:!0,xs:12,children:"Guess was illegal"})]})]})})},B=function(e){return Object(n.jsx)(l.a,{item:!0,xs:12,children:Object(n.jsx)(o.a,{style:{margin:"auto",maxWidth:400},children:Object(n.jsxs)(u.a,{children:[Object(n.jsxs)(l.a,{item:!0,xs:12,children:[e.playerGuessingDice," betting on dice"]}),Object(n.jsxs)(l.a,{item:!0,xs:12,children:[e.playerGuessingTruth," calling ",e.playerGuessingDice,"'s bet"]}),e.isGuessTurn?Object(n.jsxs)(l.a,{item:!0,xs:12,children:[e.playerGuessingDice," is about to make the bet"]}):Object(n.jsxs)(l.a,{item:!0,xs:12,children:[e.playerGuessingDice," has made the bet"]})]})})})},P=function(e){return Object(n.jsxs)(o.a,{style:{margin:"auto",marginBottom:20},children:[Object(n.jsx)(I.a,{title:"Is the guess truth or Bluff?"}),Object(n.jsxs)(u.a,{children:[Object(n.jsx)(l.a,{item:!0,xs:12,children:Object(n.jsx)(b.a,{variant:"outlined",color:"primary",onClick:function(){return e.sendTruth(!0)},children:"Truth"})}),Object(n.jsx)(l.a,{item:!0,xs:12,style:{marginTop:15},children:Object(n.jsx)(b.a,{variant:"outlined",color:"secondary",onClick:function(){return e.sendTruth(!1)},children:"Bluffing"})})]})]})},w=Object(a.createRef)(),F=Object(a.createRef)(),L=function(e){var t=Object(a.useState)([]),c=Object(j.a)(t,2),i=c[0],r=c[1],s=Object(a.useState)(!1),b=Object(j.a)(s,2),O=b[0],d=b[1],x=Object(a.useState)(!1),m=Object(j.a)(x,2),h=m[0],p=m[1],v=Object(a.useState)(!1),y=Object(j.a)(v,2),k=y[0],C=y[1],S=Object(a.useState)(""),D=Object(j.a)(S,2),G=D[0],T=D[1],E=Object(a.useState)(""),I=Object(j.a)(E,2),A=I[0],R=I[1],L=Object(a.useState)({diceValue:1,numberOfDice:0}),W=Object(j.a)(L,2),J=W[0],M=W[1],U=Object(a.useState)(!0),q=Object(j.a)(U,2),z=q[0],H=q[1];Object(a.useEffect)((function(){e.socket&&(e.socket.on("diceRolled",(function(e){r(e),w.current&&w.current.rollAll(e)})),F.current&&F.current.rollAll([1]),e.socket.on("turnInfo",(function(e){R(e.playerGuessingDice),T(e.playerGuessingTruth),M(e.currentGuess),H(e.isGuessTurn),F.current.rollAll([e.currentGuess.diceValue])})),e.socket.on("getGuess",(function(){p(!0)})),e.socket.on("getTruth",(function(){C(!0)})))}),[e.socket]);return Object(n.jsxs)(l.a,{container:!0,spacing:2,children:[Object(n.jsx)(l.a,{item:!0,xs:12,children:Object(n.jsx)(g,{ref:w,numberOfDice:i.length})}),Object(n.jsx)(l.a,{item:!0,xs:12,children:Object(n.jsx)(o.a,{style:{maxWidth:200,margin:"auto"},children:Object(n.jsxs)(u.a,{children:["Current guess is ",J.numberOfDice," of",function(){var t,c;return Object(n.jsx)(f.a,{dotColor:null!==(t=e.dotColor)&&void 0!==t?t:"#ee77ee",faceColor:null!==(c=e.faceColor)&&void 0!==c?c:"#6f1111",numDice:1,rollTime:.1,disableIndividual:!0,ref:F})}()]})})}),h&&Object(n.jsx)(V,{socket:e.socket,setDiceGuessTurn:p,illegalGuess:O,sendGuess:function(t){Number.isInteger(t.diceValue)&&Number.isInteger(t.numberOfDice)&&t.diceValue>0&&t.diceValue<=6&&(e.socket.emit("sendGuess",t),e.socket.once("legalGuess",(function(e){e?(p(!1),d(!1)):d(!0)})))}}),k&&Object(n.jsx)(P,{sendTruth:function(t){e.socket.emit("sendTruth",t),C(!1)}}),Object(n.jsx)(B,{playerGuessingDice:A,playerGuessingTruth:G,isGuessTurn:z}),Object(n.jsx)(l.a,{item:!0,xs:12,children:Object(n.jsx)("h5",{children:"Players in game"})}),Object(n.jsx)(l.a,{item:!0,xs:12,children:Object(n.jsx)(N,{players:e.players})})]})},W=function(e){var t=Object(a.useState)([]),c=Object(j.a)(t,2),i=c[0],r=c[1],s=Object(a.useState)([]),o=Object(j.a)(s,2),u=o[0],O=o[1],d=Object(a.useState)(!1),x=Object(j.a)(d,2),m=x[0],h=x[1],f=Object(a.useState)(!1),g=Object(j.a)(f,2),p=g[0],v=g[1];Object(a.useEffect)((function(){e.socket.on("playerUpdate",(function(e){r(e),O(e)})),e.socket.on("allowStartGame",(function(e){h(!0)})),e.socket.on("gameStarted",(function(){v(!0)})),e.socket.on("gameOver",(function(e){v(!1),r(e),O(e)}))}),[]);var y=function(){e.socket.emit("startGame",{})};return p?Object(n.jsx)(L,{players:i,socket:e.socket}):Object(n.jsxs)(l.a,{container:!0,spacing:2,children:[Object(n.jsx)(l.a,{item:!0,xs:12,children:Object(n.jsxs)("h3",{children:["Waiting room for room '",e.roomName,"'"]})}),Object(n.jsx)(l.a,{item:!0,xs:12,children:Object(n.jsx)("h5",{children:"Players waiting"})}),Object(n.jsx)(l.a,{item:!0,xs:12,children:Object(n.jsx)(N,{players:u})}),m&&Object(n.jsx)(l.a,{item:!0,xs:12,children:Object(n.jsx)(b.a,{onClick:y,variant:"contained",children:"Start game"})})]})},J=v,M=function(){var e=Object(a.useState)(""),t=Object(j.a)(e,2),c=t[0],i=t[1],r=Object(a.useState)(""),s=Object(j.a)(r,2),O=s[0],x=s[1],h=Object(a.useState)(!1),f=Object(j.a)(h,2),g=f[0],p=f[1],v=Object(a.useState)(void 0),y=Object(j.a)(v,2),k=y[0],C=y[1],S=Object(a.useState)(!1),D=Object(j.a)(S,2),G=D[0],T=D[1],N=Object(a.useState)(""),E=Object(j.a)(N,2),I=E[0],A=E[1];Object(a.useEffect)((function(){var e=d()(J);C(e),e.on("connectedToRoomCallBack",(function(e){}))}),[]);var R=function(){k.emit("connectToRoom",{playerName:O,roomName:c}),k.once("errorJoining",(function(e){e.errorJoining?(T(!0),A(e.errorMsg)):(p(!0),T(!1),A(""))}))};return g?Object(n.jsx)(W,{roomName:c,socket:k}):Object(n.jsxs)(l.a,{container:!0,spacing:2,children:[Object(n.jsx)(l.a,{item:!0,xs:12,children:Object(n.jsx)("h3",{children:"Online dice page"})}),Object(n.jsx)(o.a,{style:{margin:"auto"},children:Object(n.jsxs)(u.a,{children:[Object(n.jsx)(l.a,{item:!0,xs:12,children:Object(n.jsx)(m.a,{value:O,onChange:function(e){return x(e.target.value)},placeholder:"Name"})}),Object(n.jsx)(l.a,{item:!0,xs:12,style:{paddingTop:15,paddingBottom:15},children:Object(n.jsx)(m.a,{placeholder:"Room name",value:c,onChange:function(e){return i(e.target.value)}})}),Object(n.jsx)(l.a,{item:!0,xs:12,children:Object(n.jsx)(b.a,{color:"primary",variant:"contained",onClick:R,children:"Connect to room"})}),G&&Object(n.jsx)(l.a,{item:!0,xs:12,children:I})]})})]})},U=(c(117),v),q=function(){var e=Object(a.useState)("NONE"),t=Object(j.a)(e,2),c=t[0],i=t[1],r=Object(a.useState)(""),s=Object(j.a)(r,2),O=(s[0],s[1]);return Object(a.useEffect)((function(){d()(U).on("FromAPI",(function(e){O(e)}))}),[]),Object(n.jsxs)(l.a,{container:!0,spacing:2,justify:"center",alignItems:"center",className:"container",children:["SIMPLE"===c&&Object(n.jsx)(l.a,{item:!0,xs:12,children:Object(n.jsx)(p,{})}),"ONLINE"===c&&Object(n.jsx)(l.a,{item:!0,xs:12,children:Object(n.jsx)(M,{})}),"NONE"===c&&Object(n.jsx)(o.a,{style:{width:300,marginTop:30},children:Object(n.jsxs)(u.a,{children:[Object(n.jsx)(l.a,{item:!0,xs:6,style:{paddingBottom:20,margin:"auto"},children:Object(n.jsx)(b.a,{color:"primary",variant:"contained",onClick:function(){return i("SIMPLE")},children:"Play simple"})}),Object(n.jsx)(l.a,{item:!0,xs:6,style:{margin:"auto"},children:Object(n.jsx)(b.a,{color:"secondary",variant:"contained",onClick:function(){return i("ONLINE")},children:"Play online"})})]})})]})};var z=function(){return Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)("div",{className:"header",children:"Dice game"}),Object(n.jsx)(q,{})]})},H=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,153)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,i=t.getLCP,r=t.getTTFB;c(e),n(e),a(e),i(e),r(e)}))};s.a.render(Object(n.jsx)(i.a.StrictMode,{children:Object(n.jsx)(z,{})}),document.getElementById("root")),H()},78:function(e,t,c){},79:function(e,t,c){}},[[118,1,2]]]);
//# sourceMappingURL=main.4ec7ad3e.chunk.js.map